/**
 * nodeJS 模板引擎(依赖doJS框架)
 * @authors yutent (yutent@doui.cc)
 * @date    2015-12-28 13:57:12
 *
 */
"use strict";

let Tool = require('./tool')

class Tpls {


    constructor(conf){
        if(Object.empty(conf))
            conf = {}

        this.tool = new Tool(conf)
        this.data = {}
    }

    /**
     * 定义变量
     * @param {Str} key  变量名
     * @param {any} val 值
     */
    assign(key, val){
        key += ''
        if(!key || empty(val))
            return

        this.data[key] = val
    }

    /**
     * 模板渲染
     * @param  {String} 模板路径
     */
    rander(tpl){
        tpl += '.tpl'

        if(!Fs.exists(tpl))
            return Response.debug('Can not find template "' + tpl + '"')

        this.tool.config('path', libs.PATH.parse(tpl).dir + '/')
        let fileStr = Fs.read(tpl) + ''

        fileStr = this.tool.parse(fileStr, this.data)

        Response.rander(fileStr)
    }


}





module.exports = Tpls

